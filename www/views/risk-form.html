<div class="main-nav">
    <div class="left-child"><a href="#/risks"><h5>
        <i class="fa fa-chevron-left link-icon"></i></a></h5></div>
    <div class="center-child"><h5>{{ pageTitle }}</h5></div>
    <div class="right-child" ng-if="risk.riskId"><a ng-click="remove(risk)">
        <h5><i class="fa fa-trash link-icon"></i></h5></a></div>
</div>

<div class="separator-large"></div>

<div class="container">
     <div class="row">
        <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-8 col-md-offset-2">
            <div class="loading" ng-show="loading">
                <div class="loading-content">
                    <i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <form name="form">
                <div ng-if="!loading">

                    <div class="form-group">
                       <label class="control-label">Title</label>
                       <input
                          class="form-control"
                          type="text"
                          placeholder="Risk title"
                          name="riskTitle"
                          ng-model="risk.riskTitle"
                          ng-required="true"
                          ng-minlength="5"/>
                       <div ng-show="form.riskTitle.$dirty" ng-messages="form.riskTitle.$error">
                           <p class="help-block-error" ng-message="required">
                              Please, type this field.</p>
                           <p class="help-block-error" ng-message="minlength">
                              This field must be at least 5 characters long.</p>
                       </div>
                    </div>

                    <div class="form-group">
                        <md-input-container>
                            <label class="control-label">Cause</label>
                            <textarea
                                name="riskCause"
                                md-maxlength="150"
                                rows="3"
                                md-select-on-focus
                                ng-required="true"
                                ng-model="risk.riskCause"></textarea>
                        </md-input-container>
                        <div ng-show="form.riskCause.$dirty" ng-messages="form.riskCause.$error">
                            <p class="help-block-error" ng-message="required">
                               Please, type this field.</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <md-input-container>
                            <label class="control-label">Effect</label>
                            <textarea
                                name="riskEffect"
                                md-maxlength="150"
                                rows="3"
                                md-select-on-focus
                                ng-required="true"
                                ng-model="risk.riskEffect"></textarea>
                        </md-input-container>
                        <div ng-show="form.riskEffect.$dirty" ng-messages="form.riskEffect.$error">
                            <p class="help-block-error" ng-message="required">
                               Please, type this field.</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="select" class="control-label">Risk Type</label>
                        <select
                            class="form-control"
                            name="riskTypeId"
                            ng-required = "true"
                            ng-model="risk.riskTypeId"
                            ng-options="riskType.riskTypeId as riskType.riskTypeName for riskType in riskTypes | orderBy:'riskTypeName'">
                            <option value="">Select risk type</option>
                        </select>
                        <div ng-show="form.riskTypeId.$dirty" ng-messages="form.riskTypeId.$error">
                            <p class="help-block-error" ng-message="required">
                               Please, type this field.</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="select" class="control-label">Risk Category</label>
                        <select
                            class="form-control"
                            name="riskCategoryId"
                            ng-required = "true"
                            ng-model="risk.riskCategoryId"
                            ng-options="riskCategory.riskCategoryId as riskCategory.riskCategoryName for riskCategory in riskCategories | orderBy:'riskCategoryName'">
                            <option value="">Select risk type</option>
                        </select>
                        <div ng-show="form.riskCategoryId.$dirty" ng-messages="form.riskCategoryId.$error">
                            <p class="help-block-error" ng-message="required">
                               Please, type this field.</p>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-block" ng-click="save(risk)"
                        ng-disabled="form.$invalid && !loading">Save</button>
                </div>
           </form>
        </div>
    </div>
</div>
